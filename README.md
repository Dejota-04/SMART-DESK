
# üëë Rei dos Piratas: Dashboard IoT com Oracle APEX

**Documenta√ß√£o do Challenge Sprint - FIAP**

**Grupo CATECH**

## üë®‚Äçüíª Integrantes

-   **Daniel Santana Corr√™a Batista**  `[RM559622]`

-   **Wendell Nascimento Dourado**  `[RM559336]`

-   **Jonas de Jesus Campos de Oliveira**  `[RM561144]`


----------

## 1. üéØ Tema e Problema

O projeto "Rei dos Piratas" √© uma plataforma de e-commerce especialista em mang√°s. O problema a ser resolvido √© criar uma arquitetura de software pr√≥pria e moderna, superando as limita√ß√µes de marketplaces gen√©ricos e permitindo a integra√ß√£o de tecnologias inovadoras para a gest√£o da opera√ß√£o.

## 2. üõ†Ô∏è Solu√ß√£o com Oracle APEX

Para este desafio, a plataforma **Oracle APEX** foi a ferramenta central. Ela foi utilizada para construir o **painel administrativo interno (back-office)** da "Rei dos Piratas".

Com o APEX, a equipe da loja pode realizar toda a gest√£o da opera√ß√£o:

-   Cadastrar novos mang√°s;

-   Controlar os n√≠veis de estoque;

-   Processar pedidos recebidos;

-   Visualizar relat√≥rios de vendas.


A escolha pelo APEX foi estrat√©gica para acelerar o desenvolvimento desta ferramenta interna crucial para o neg√≥cio.

## 3. üí° Aplica√ß√£o de IoT para Controle de Qualidade

Um dos maiores desafios do e-commerce de mang√°s √© garantir a integridade dos produtos, que s√£o de papel e sens√≠veis a varia√ß√µes de ambiente.

Para solucionar isso, o projeto implementa um sistema de **Internet of Things (IoT) para Controle de Qualidade do Estoque**.

-   **O que √©:** Sensores de umidade e temperatura s√£o instalados no local de estoque.

-   **Como funciona:** Estes dispositivos enviam dados em tempo real para a nossa plataforma Oracle APEX.

-   **O Resultado:** Caso os n√≠veis saiam das condi√ß√µes ideais, o sistema dispara um **alerta autom√°tico** no painel administrativo. Isso previne perdas de produtos e garante que o cliente receba um item em perfeito estado, agregando valor √† opera√ß√£o.


**Dashboard de Monitoramento (Implementa√ß√£o IoT + APEX):**

----------

## üèóÔ∏è Arquitetura T√©cnica da Solu√ß√£o IoT

O fluxo de dados do monitoramento de estoque foi implementado da seguinte forma:

1.  **ESP32 (Simulador Wokwi):** Um dispositivo simulado gera dados aleat√≥rios de temperatura e umidade, simulando os sensores do galp√£o.

2.  **MQTT (Broker):** O ESP32 publica os dados via MQTT (no broker `broker.hivemq.com`).

3.  **Node-RED (Middleware):** Um fluxo no Node-RED se inscreve no t√≥pico MQTT, recebe os dados JSON e os envia (via `POST`) para a API REST do APEX.

4.  **Oracle APEX (API REST):** Um endpoint `POST` criado no ORDS (Oracle REST Data Services) recebe os dados do Node-RED e executa um script PL/SQL para inserir na tabela.

5.  **Oracle APEX (Dashboard):** O painel administrativo, constru√≠do no App Builder, l√™ a tabela e exibe os dados nos gr√°ficos e cards de alerta em tempo real.


----------

## ‚öôÔ∏è Artefatos SQL (Oracle APEX)

#### 1. Tabela de Destino

SQL

```
CREATE TABLE galpao_mangas (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    timestamp_leitura TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    temperatura NUMBER(5,2),
    umidade NUMBER(5,2),
    status_led VARCHAR2(10)
);

```

#### 2. Handler da API `POST` (ORDS)

SQL

```
INSERT INTO galpao_mangas (temperatura, umidade, status_led)
VALUES (:temperatura, :umidade, :status_led)

```

#### 3. SQL dos Cards de Alerta (Ex: Temperatura)

SQL

```
SELECT
    'Temperatura Atual' as card_title,
    TO_CHAR(temperatura, '99.99') || ' ¬∞C' as card_value,
    CASE
        WHEN temperatura > 25.0 THEN 'u-color-38' -- Vermelho
        ELSE 'u-color-36' -- Verde
    END as card_color,
    CASE
        WHEN temperatura > 25.0 THEN 'fa-exclamation-triangle'
        ELSE 'fa-check-circle'
    END as card_icon
FROM galpao_mangas
ORDER BY timestamp_leitura DESC
FETCH FIRST 1 ROW ONLY

```

#### 4. SQL dos Gr√°ficos de Linha (Agrupados)

SQL

```
SELECT
    TO_CHAR(TRUNC(timestamp_leitura, 'MI'), 'HH24:MI') as minuto_formatado,
    AVG(temperatura) as temperatura_media
FROM galpao_mangas
GROUP BY TRUNC(timestamp_leitura, 'MI')
ORDER BY TRUNC(timestamp_leitura, 'MI') ASC
```


### Link do v√≠deo com prot√≥tipo
https://youtu.be/I9dewidzvqE?si=sS2-XEXeYB4omLvk
